<h1 style="text-align: center">{{ title() }}</h1>

<ion-content>
    <ion-list>
        @for (item of items(); track $index) {
            <ion-item-sliding #slide>
                <ion-item>
                    <ion-label>{{ item.name }}</ion-label>
                    <ion-button expand="block"
                                (click)="openItem(item)">Open
                    </ion-button>
                </ion-item>

                <ion-item-options>
                    <ion-button style="min-height: 24px"
                                color="secondary"
                                (click)="archive(item)">Archive
                    </ion-button>
                    <ion-button style="min-height: 24px"
                                color="danger"
                                (click)="delete(item, slide)">Delete
                    </ion-button>
                </ion-item-options>
            </ion-item-sliding>
        }
    </ion-list>

    <ion-modal #modal
               [isOpen]="modalOpen()"
               [canDismiss]="true"
               (willDismiss)="onModalWillDismiss($event)">
        <ng-template>
            <ion-header>
                <ion-toolbar>
                    <ion-title>{{ selectedItem()?.name }}</ion-title>
                    <ion-buttons slot="end">
                        <ion-button (click)="requestClose()">Close</ion-button>
                    </ion-buttons>
                </ion-toolbar>
            </ion-header>

            <ion-content class="ion-padding">
                <p>Details about {{ selectedItem()?.name }}</p>
                @if (selectedItem()?.details) {
                    <p style="text-align: center; border-top: 1px solid gray; padding-top: 10px">Details: </p>
                    <p>{{ selectedItem()?.details }} </p>
                }
            </ion-content>
        </ng-template>
    </ion-modal>
</ion-content>
